stages:
  - build
  - deploy
  # - dast




build-code:
  stage: build
  image: maven
  tags:
  - shell_reg
  script:
  - echo "==== Project Building Started ====="
  - mvn clean install
  - echo "code build Successfull..."
  - pwd
  - ls
  when: always
  artifacts:
    paths:
      - target/*.war
    expire_in: 15 days



deploy:  
  stage: deploy  
  tags:  
    - shell_reg 
  environment: Production   
  script:      
    - mvn clean package    
    - sudo cp target/studentapp-2.2-SNAPSHOT.war /opt/tomcat/webapps

# .dast:
#   variables:
#     DAST_WEBSITE: http://44.207.141.37:8080
#   stage: dast
#   tags:
#     - docker
#   artifacts:
#     paths:
#      - gl-dast-report.json
#     expire_in: never
